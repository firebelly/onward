// Carousels

.carousel-wrap {
  @include clearfix;
}

.carousel {
  // @include clearfix;
  padding: $global-padding;

  // Make Flickity extend outside .container
  .flickity-viewport {
    overflow: visible;
  }

  // Gradient
  .cells.flickity-enabled {
    &::after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      right: 50%;
      bottom: 0;
      width: 15%;
      margin-right: -50vw;
      background-image: linear-gradient(90deg, rgba(color(tan), 0) 0%, rgba(color(tan), 1) 100%);
      pointer-events: none;

      // Desktop styles
      @include media-md {
      }
    }
  }

  // Individual carousel cells
  .cell {
    width: 85%;
    margin-right: $global-padding;
    background: color(white);
    padding: $global-padding;
  }

  // Postcard carousels
  &.postcards {
    figure {
      display: block;
      background-color: color(black);
      margin-bottom: $global-padding;
      position: relative;
      img {
        @include transition(all);
        display: block;
        mix-blend-mode: screen;
        filter: grayscale(100%);
      }
      // Monochrome image treatment before hover
      &::before {
        @include transition(opacity);
        content: '';
        background-color: color(tan);
        mix-blend-mode: multiply;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
    }
    // Hover state for images
    .cell {
      &:hover,
      &.-active {
        figure {
          img {
            filter: none;
            mix-blend-mode: none;
          }
          &::before {
            opacity: 0;
          }
        }
      }
    }

    // Content inside cell
    .cell-body {
      padding: 0 $global-padding;
    }
    p {
      @include p3;
    }
  }

  // Desktop styles
  @include media-md {
    padding: 0;
    .carousel-header {
      .grid-item:nth-child(2) {
        position: relative;
      }
    }
    .cells {
      margin: grid(16) 0;
      li {
        width: columns(5);
        max-width: 450px;
        float: left;
      }
    }
  }
  &.postcards {
    padding-top: grid(16);
  }
}

// Pagination
.carousel-pagination {
  @include h3;
  span {
    color: color(gray);
    cursor: pointer;
    @include smooth;
    display: inline-block;
    padding: grid(1) grid(2);
    user-select: none;
    svg {
      width: 27px;
      height: 19px;
    }
    &.-active {
      color: color(red);
    }
    &:hover {
      color: color(black);
      svg {
        fill: color(black);
      }
    }
  }
  svg {
    fill: color(gray);
  }
  .cell-buttons {
    display: inline-block;
  }
  .next {
    svg {
      transform: rotate(180deg);
    }
    padding-right: 0;
  }

  // Desktop styles
  @include media-md {
    position: absolute;
    bottom: 0;
    right: 0;
  }
}